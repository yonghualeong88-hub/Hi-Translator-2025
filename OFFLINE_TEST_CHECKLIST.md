# 离线翻译功能测试清单

## 🔧 测试准备

### 1. 网络断开测试
- [ ] 关闭 WiFi 连接
- [ ] 关闭移动数据/蜂窝网络
- [ ] 确认设备显示"无网络连接"状态

### 2. 应用状态检查
- [ ] 应用启动正常
- [ ] 语言包管理页面可以正常打开
- [ ] 主题切换功能正常

## 📋 功能测试项目

### 1. 翻译模式管理
- [ ] 应用自动检测到网络断开
- [ ] 翻译模式自动切换到离线模式
- [ ] 状态栏显示离线模式图标

### 2. 语言包管理
- [ ] 语言包管理页面正常显示
- [ ] 已下载的语言包显示为"已安装"
- [ ] 未下载的语言包显示为"可安装"
- [ ] 语言包数量与语言选择器一致（86种）

### 3. 离线翻译功能
- [ ] 选择已下载语言包的语言对进行翻译
- [ ] 翻译功能正常工作
- [ ] 翻译结果显示正常
- [ ] 语音播放功能正常（如果有下载的语言包）

### 4. 错误处理
- [ ] 尝试翻译未下载语言包的语言对
- [ ] 系统正确显示"该语言对不支持离线翻译"提示
- [ ] 系统提示下载相应的语言包

## 🎯 预期结果

### 正常情况
- ✅ 应用在离线状态下正常运行
- ✅ 已下载的语言包可以正常使用
- ✅ 翻译模式管理器正确识别离线状态
- ✅ 用户界面显示正确的离线状态

### 异常情况处理
- ❌ 网络断开后应用崩溃
- ❌ 离线翻译功能不可用
- ❌ 语言包管理页面无法加载
- ❌ 状态显示错误

## 🔍 调试信息

### 检查日志
在测试过程中，注意观察控制台输出：
- 网络状态变化日志
- 翻译模式切换日志
- 语言包加载日志
- 错误信息日志

### 关键日志示例
```
🌐 网络状态变化: 在线 → 离线
🔄 自动切换到离线模式
📱 翻译模式设置为: auto
✅ 语言包已加载: zh-CN, en
```

## 📱 测试设备要求

### Android 设备
- [ ] Android 8.0 或更高版本
- [ ] 已安装 Expo Go 或开发构建版本
- [ ] 设备存储空间充足（用于语言包）

### 测试环境
- [ ] 开发环境：Expo 开发构建
- [ ] 生产环境：发布版本（可选）

## 🚨 常见问题排查

### 问题1：应用无法检测网络状态
**解决方案：**
- 检查 NetInfo 模块是否正确安装
- 确认开发构建包含原生模块
- 重新预构建项目

### 问题2：语言包无法下载
**解决方案：**
- 检查存储权限
- 确认网络连接正常
- 检查语言包大小配置

### 问题3：离线翻译不工作
**解决方案：**
- 确认语言包已正确下载
- 检查语言代码映射
- 验证翻译服务配置

## 📊 测试报告模板

```
测试日期：____
设备型号：____
Android版本：____
应用版本：____

网络断开测试：
- WiFi断开：✅/❌
- 移动数据断开：✅/❌
- 飞行模式：✅/❌

功能测试：
- 离线模式切换：✅/❌
- 语言包管理：✅/❌
- 离线翻译：✅/❌
- 错误处理：✅/❌

发现的问题：
1. ________________
2. ________________
3. ________________

总体评价：✅ 通过 / ❌ 需要修复
```

## 🔄 测试完成后

### 恢复网络连接
- [ ] 重新开启 WiFi
- [ ] 重新开启移动数据
- [ ] 确认网络连接正常
- [ ] 验证在线翻译功能恢复

### 清理测试数据
- [ ] 清理测试翻译记录
- [ ] 重置翻译模式设置（可选）
- [ ] 检查应用状态正常
