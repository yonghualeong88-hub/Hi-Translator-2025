# ğŸ”§ å‰ç«¯AIæ‰©å±•é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜è¯Šæ–­

æ ¹æ®æµ‹è¯•ç»“æœï¼Œ**åç«¯APIå®Œå…¨æ­£å¸¸**ï¼Œé—®é¢˜å‡ºç°åœ¨å‰ç«¯è°ƒç”¨ä¸Šã€‚

### âœ… åç«¯çŠ¶æ€ç¡®è®¤
- âœ… APIå¥åº·æ£€æŸ¥æ­£å¸¸
- âœ… OpenAIè¿æ¥æ­£å¸¸
- âœ… çŸ­è¯­æ‰©å±•åŠŸèƒ½æ­£å¸¸
- âœ… è¿”å›4ä¸ªåœºæ™¯çš„AIç”Ÿæˆå†…å®¹
- âœ… æ•°æ®ç»“æ„å®Œæ•´æ­£ç¡®

### âŒ å‰ç«¯å¯èƒ½çš„é—®é¢˜
1. **ç½‘ç»œè¿æ¥é—®é¢˜** - æ‰‹æœº/æ¨¡æ‹Ÿå™¨æ— æ³•è®¿é—®ç”µè„‘API
2. **APIåœ°å€é…ç½®é”™è¯¯** - å‰ç«¯ä½¿ç”¨çš„IPåœ°å€ä¸æ­£ç¡®
3. **ç¼“å­˜é—®é¢˜** - åº”ç”¨ç¼“å­˜äº†æ—§çš„æ•°æ®
4. **ä»£ç è°ƒç”¨é—®é¢˜** - å‰ç«¯ä»£ç æ²¡æœ‰æ­£ç¡®è°ƒç”¨API

## ğŸš€ è§£å†³æ­¥éª¤

### 1. æ£€æŸ¥APIåœ°å€é…ç½®

ç¡®è®¤ `config/api.ts` ä¸­çš„IPåœ°å€æ­£ç¡®ï¼š

```typescript
// config/api.ts
export const API_CONFIG = {
  DEVELOPMENT: {
    BASE_URL: "http://10.243.25.104:3001", // ç¡®ä¿è¿™æ˜¯ä½ çš„ç”µè„‘IP
    TIMEOUT: 5000,
  }
};
```

### 2. è·å–æ­£ç¡®çš„IPåœ°å€

```bash
# Windows
ipconfig | findstr "IPv4"

# åº”è¯¥æ˜¾ç¤ºç±»ä¼¼: IPv4 Address. . . . . . . . . . . : 10.243.25.104
```

### 3. é‡å¯åº”ç”¨å’ŒæœåŠ¡

```bash
# 1. é‡å¯åç«¯æœåŠ¡
cd backend
npm run dev

# 2. é‡å¯React Nativeåº”ç”¨
# åœ¨ç»ˆç«¯ä¸­æŒ‰ Ctrl+C åœæ­¢åº”ç”¨ï¼Œç„¶åé‡æ–°å¯åŠ¨
```

### 4. æ£€æŸ¥ç½‘ç»œè¿æ¥

ç¡®ä¿ï¼š
- âœ… æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€WiFiç½‘ç»œ
- âœ… é˜²ç«å¢™å…è®¸ç«¯å£3001
- âœ… ç½‘ç»œè¿æ¥ç¨³å®š

### 5. æ·»åŠ è°ƒè¯•æ—¥å¿—

åœ¨ `utils/api.ts` ä¸­æ·»åŠ æ›´å¤šæ—¥å¿—ï¼š

```typescript
export const expandPhrase = async (
  phrase: string,
  setExpandedPhrases: (phrases: ExpandedPhrase[]) => void,
  setIsExpanding: (loading: boolean) => void
): Promise<ExpandedPhrase[]> => {
  console.log('ğŸ” å¼€å§‹æ‰©å±•çŸ­è¯­:', phrase);
  console.log('ğŸ“ APIåœ°å€:', API_BASE);
  
  if (!phrase.trim()) return [];

  setIsExpanding(true);
  
  // å…ˆæ˜¾ç¤ºfallbackæ•°æ®
  const fallbackData = generateFallbackData(phrase);
  setExpandedPhrases(fallbackData);
  console.log('ğŸ“‹ æ˜¾ç¤ºfallbackæ•°æ®');

  try {
    console.log('ğŸŒ å¼€å§‹APIè¯·æ±‚...');
    const response = await fetchWithTimeout(`${API_BASE}/api/expand-phrase`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ phrase: phrase.trim(), lang: "en" }),
    }, API_TIMEOUT);

    console.log('ğŸ“Š å“åº”çŠ¶æ€:', response.status);
    console.log('ğŸ“Š å“åº”OK:', response.ok);

    if (response.ok) {
      const data = await response.json();
      console.log('âœ… APIè°ƒç”¨æˆåŠŸï¼Œåœºæ™¯æ•°:', data.length);
      setExpandedPhrases(data);
      console.log("âœ… AIæ‰©å±•æˆåŠŸ");
      return data;
    } else {
      console.log('âŒ APIå“åº”é”™è¯¯:', response.status);
    }
  } catch (err) {
    console.log("âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥:", err.message);
  } finally {
    setIsExpanding(false);
  }

  return fallbackData;
};
```

## ğŸ” è°ƒè¯•æ–¹æ³•

### 1. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—

åœ¨React Nativeåº”ç”¨ä¸­æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š

```
ğŸ” å¼€å§‹æ‰©å±•çŸ­è¯­: I am hungry
ğŸ“ APIåœ°å€: http://10.243.25.104:3001
ğŸ“‹ æ˜¾ç¤ºfallbackæ•°æ®
ğŸŒ å¼€å§‹APIè¯·æ±‚...
ğŸ“Š å“åº”çŠ¶æ€: 200
ğŸ“Š å“åº”OK: true
âœ… APIè°ƒç”¨æˆåŠŸï¼Œåœºæ™¯æ•°: 4
âœ… AIæ‰©å±•æˆåŠŸ
```

### 2. å¦‚æœçœ‹åˆ°ç½‘ç»œé”™è¯¯

```
âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥: Network request failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥IPåœ°å€æ˜¯å¦æ­£ç¡®
- ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ç½‘ç»œ
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### 3. å¦‚æœçœ‹åˆ°è¶…æ—¶é”™è¯¯

```
âŒ ç½‘ç»œè¯·æ±‚å¤±è´¥: Request timeout
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¢åŠ è¶…æ—¶æ—¶é—´
- æ£€æŸ¥ç½‘ç»œé€Ÿåº¦
- é‡å¯åç«¯æœåŠ¡

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

### æ§åˆ¶å°æ—¥å¿—
```
âœ… AIæ‰©å±•æˆåŠŸ
```

### ç•Œé¢æ˜¾ç¤º
- 4ä¸ªä¸åŒåœºæ™¯ï¼ˆé¤å…ã€å®¶é‡Œã€èšä¼šã€åŠå…¬å®¤ç­‰ï¼‰
- æ¯ä¸ªåœºæ™¯2ä¸ªè‡ªç„¶è¡¨è¾¾
- å®Œæ•´çš„ä¸­è‹±æ–‡å¯¹ç…§
- ä¸°å¯Œã€åœ°é“çš„è¯­è¨€ç”¨æ³•

### ç¤ºä¾‹ç»“æœ
**è¾“å…¥**: "I am hungry"
**è¾“å‡º**:
- ğŸ½ï¸ **é¤å…**: "I'm starving" â†’ "æˆ‘é¥¿æäº†"
- ğŸ  **å®¶é‡Œ**: "I'm really hungry" â†’ "æˆ‘çœŸçš„å¾ˆé¥¿"
- ğŸ‰ **èšä¼š**: "I'm in the mood for a snack" â†’ "æˆ‘æƒ³åƒç‚¹å°åƒ"
- ğŸ¢ **åŠå…¬å®¤**: "I'm feeling peckish" â†’ "æˆ‘æœ‰ç‚¹é¥¿äº†"

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆçœ‹åˆ°fallbackæ•°æ®è€Œä¸æ˜¯AIå†…å®¹ï¼Ÿ
A: ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œæ£€æŸ¥IPåœ°å€å’Œç½‘ç»œè¿æ¥

### Q: ä¸ºä»€ä¹ˆAPIè°ƒç”¨æˆåŠŸä½†ç•Œé¢æ²¡æ›´æ–°ï¼Ÿ
A: å¯èƒ½æ˜¯çŠ¶æ€æ›´æ–°é—®é¢˜ï¼Œæ£€æŸ¥setExpandedPhrasesè°ƒç”¨

### Q: ä¸ºä»€ä¹ˆæ¯æ¬¡ç»“æœéƒ½ä¸åŒï¼Ÿ
A: è¿™æ˜¯æ­£å¸¸çš„ï¼ŒOpenAIä¼šç”Ÿæˆä¸åŒçš„å†…å®¹

### Q: ä¸ºä»€ä¹ˆæœ‰äº›çŸ­è¯­æ²¡æœ‰4ä¸ªåœºæ™¯ï¼Ÿ
A: æ£€æŸ¥APIè¿”å›çš„æ•°æ®ç»“æ„ï¼Œç¡®ä¿è§£ææ­£ç¡®

## ğŸ‰ æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¯´æ˜é—®é¢˜å·²è§£å†³ï¼š
- âœ… æ§åˆ¶å°æ˜¾ç¤º "âœ… AIæ‰©å±•æˆåŠŸ"
- âœ… ç•Œé¢æ˜¾ç¤º4ä¸ªåœºæ™¯çš„AIç”Ÿæˆå†…å®¹
- âœ… æ¯ä¸ªåœºæ™¯åŒ…å«2ä¸ªè‡ªç„¶è¡¨è¾¾
- âœ… å®Œæ•´çš„ä¸­è‹±æ–‡å¯¹ç…§
- âœ… ä¸å†æ˜¾ç¤ºfallbackæ•°æ®

ç°åœ¨ä½ çš„AIçŸ­è¯­æ‰©å±•åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼ğŸš€
