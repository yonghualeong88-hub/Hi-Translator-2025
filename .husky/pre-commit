#!/bin/sh
# Pre-commit hook to run quality checks before committing
echo "ğŸ” Running pre-commit checks..."

# Run ESLint on TypeScript and TypeScript React files
echo "ğŸ“ Running ESLint checks..."
npx eslint . --ext .ts,.tsx --max-warnings 0

# Check if ESLint passed
if [ $? -ne 0 ]; then
  echo "âŒ ESLint checks failed. Please fix the errors before committing."
  exit 1
fi

# Run TypeScript type checking
echo "ğŸ” Running TypeScript type checks..."
npx tsc --noEmit

# Check if TypeScript passed
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript type checks failed. Please fix the errors before committing."
  exit 1
fi

# Run security checks
echo "ğŸ”’ Running security checks..."
node scripts/security-check.js

# Check if security checks passed
if [ $? -ne 0 ]; then
  echo "âŒ Security checks failed. Please fix the security issues before committing."
  exit 1
fi

# Run style checks
echo "ğŸ¨ Running style checks..."
node scripts/style-check.js

# Check if style checks passed
if [ $? -ne 0 ]; then
  echo "âŒ Style checks failed. Please fix the style issues before committing."
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
